Now, please do deep dive about the user package/plan, specificly in Free package.

At the moment, we have Free packages which is ofc it's free. I want change the Free package to Free Trial.

At the moment, when user sign up, they automaticly is assign in free package.

Before user can get the Free Trial, they must be subscribe and input the credit/debit card information using recurring payment Midtrans in checkout page.

Like semrush, when trial is ended, it will be auto charge.

Related to subscription/recurring please see in current recurring function, in docs midtrans-reccuring-flow.md, midtrans-subscribtion.md. The flow is almost same which is:

Tokenization
Charge
Subscription
But, there's bit different, which is the transaction amount is 0 and the start time is when user's free trial is ended with scheduler object

{
"name": "MONTHLY_2019",
"amount": "14000",
"currency": "IDR",
"payment_type": "credit_card",
"token": "48111111sHfSakAvHvFQFEjTivUV1114",
"schedule": {
"interval": 1,
"interval_unit": "month",
"max_interval": 12,
"start_time": "2020-07-22 07:25:01 +0700"
},
"retry_schedule": {
"interval": 1,
"interval_unit": "day",
"max_interval": 3,
},
"metadata": {
"description": "Recurring payment for A"
},
"customer_details": {
"first_name": "John",
"last_name": "Doe",
"email": "johndoe@email.com",
"phone": "+62812345678"
}
}

Scheduler Object
"schedule": {
"interval": 1,
"interval_unit": "month",
"max_interval": null,
"start_time": "2019-05-29 09:11:01 +0700"
}

JSON Attribute Description Type Required
interval Subscription's interval given by merchant. Integer Required
interval_unit Interval temporal unit.
Note: Supports day, week, and month. String Required
max_interval Maximum interval of subscription. Subscription will end after maximum interval is reached.
If max_interval is set to 0 will be executed once.
If max_interval is null or omitted from the payload, the subscription will continue indefinitely until manually deactivated. Integer Optional
start_time Timestamp of subscription in yyyy-MM-dd HH:mm:ss Z. The value must be after the current time. If specified, first payment will happen on start_time. If start_time is not specified, the default value for start_time will be the date after the first interval after current time. String Optional

What you need to do is:

Disable the Free Trial (I'll do it by myself)
make another logic, so the packages can be handle the trial. For example, at the moment we have 3 packages including Free. That are Pro and Premium. The Pro and Premium can be choosen with Free Trial and after user's free trial ended, it'll be charge the user exactly the amount of the packages plan. For example, I subscribe free trial pro plan with price 45 USD, converted to IDR this rate day is 736.649. When the trial is 3 days, so after 3 days, Midtrans will be recharge me 736.649. Keep in mind, that we'll not send another request to midtrans when the free trial is ended, it'll be handled by midtrans bcs we aleady use scheduler.
I didn't need to code changes yet, I need you to made the plan as detail as possible. Made in .md file, write all step by step in detailed way, as detail as possible.